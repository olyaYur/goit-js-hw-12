{"version":3,"file":"commonHelpers.js","sources":["../src/partials/markup.js","../src/partials/getImages.js","../src/partials/simpleBox.js","../src/partials/smoothScroll.js","../src/main.js"],"sourcesContent":["export function addImages(photos) {\n    return photos.reduce(\n        (html, hit) => html + `\n        <li class=\"gallery-list\">\n          <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">\n            <img class =\"gallery-image\" src =${hit.webformatURL} alt =${hit.tags} />\n          </a>\n          <span class=\"gallery-wrapper\">\n            <span class=\"gallery-tit-wrap\">  \n              <span class=\"gallery-subtitle\"><b>Likes</b></span>\n              <span class=\"gallery-sub-title-number\">${hit.likes}</span>\n            </span>\n            <span class=\"gallery-tit-wrap\">  \n              <span class=\"gallery-subtitle\"><b>Views</b></span>\n              <span class=\"gallery-sub-title-number\">${hit.views}</span>\n            </span>\n            <span class=\"gallery-tit-wrap\">  \n              <span class=\"gallery-subtitle\"><b>Comments</b></span>\n              <span class=\"gallery-sub-title-number\">${hit.comments}</span>\n            </span>\n            <span class=\"gallery-tit-wrap\">  \n              <span class=\"gallery-subtitle\"><b>Downloads</b></span>\n              <span class=\"gallery-sub-title-number\">${hit.downloads}</span>\n            </span>\n          </span>\n       </li> \n        `, \"\"\n    );\n  }\n  ","import axios from 'axios';\n\nexport async function getImages(\n  name,\n  MY_KEY,\n  currentPage,\n  numberOfResultsPerPage\n) {\n  let searchParams = new URLSearchParams({\n    key: MY_KEY,\n    page: currentPage,\n    per_page: numberOfResultsPerPage, \n    q: name,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  return await axios\n    .get(`/api/?${searchParams}`)\n    .then(response => {\n      console.log(response.data);  \n      return response.data;\n    })\n    .then(photos => {\n      console.log(photos);\n      return photos;\n    });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: \"alt\",\n    captionDelay: 250,\n    nav: true,\n    close: true,\n    enableKeyboard: true,\n    docClose: true,\n});\nlightbox.refresh();\n\n","export function makeSmoothScrolling() {\n    const galleryItemHeight = document\n      .querySelector('.gallery li')\n      .getBoundingClientRect().height;\n  \n    window.scrollBy({\n      top: galleryItemHeight * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n  }","\"use strict\";\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nimport { addImages } from './partials/markup.js';\nimport { getImages } from './partials/getImages.js';\nimport { lightbox } from './partials/simpleBox.js';\nimport { makeSmoothScrolling } from './partials/smoothScroll.js';\n\nconst formSearch = document.querySelector('.form');\nconst inputField = document.querySelector('.input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.loadMore');\nconst MY_KEY = '41835868-9a86cd0490c6a90cb9e6f50a0';\naxios.defaults.baseURL = 'https://pixabay.com';\n\nformSearch.addEventListener('submit', searchImages);\n\ncloseLoader();\n\nloadMoreBtn.classList.add('invisible');\nlet currentPage = 1;\nconst numberOfResultsPerPage = 40;\nlet name = '';\n\nasync function searchImages(event) {\n  event.preventDefault();\n\n  currentPage = 1;\n  loadMoreBtn.classList.add('invisible');\n  gallery.innerHTML = '';\n  name = inputField.value.trim();\n\n  showLoader();\n\n  errorOfChecking(name);\n\n  try {\n    const images = await getImages(\n      name,\n      MY_KEY,\n      currentPage,\n      numberOfResultsPerPage\n    );\n\n    if (images.hits.length === 0) {\n      closeLoader();\n      inputField.value = '';\n\n      iziToast.error({\n        title: 'Error',\n        timeout: '2000',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#FAFAFB',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    gallery.insertAdjacentHTML('beforeend', addImages(images.hits));\n\n    lightbox.refresh();\n\n    if (images.totalHits > numberOfResultsPerPage) {\n      showLoadMore();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      timeout: '2000',\n      message: error,\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n    });\n  } finally {\n    closeLoader();\n  }\n}\n\nloadMoreBtn.addEventListener('click', isLoadMore);\n\nasync function isLoadMore() {\n  event.preventDefault();\n\n  currentPage++;\n\n  name = inputField.value.trim();\n\n  try {\n    const images = await getImages(\n      name,\n      MY_KEY,\n      currentPage,\n      numberOfResultsPerPage\n    );\n\n    const totalHits = images.totalHits;\n    let countPage = Math.ceil(totalHits / numberOfResultsPerPage);\n\n    if (currentPage === countPage) {\n      hiddenLoadMore();\n      closeLoader();\n      gallery.innerHTML += addImages(images.hits);\n      makeSmoothScrolling();\n      inputField.value = '';\n      iziToast.info({\n        title: 'Info',\n        timeout: '5000',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: '#FAFAFB',\n        backgroundColor: '#00FF00',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    if (currentPage < countPage) {\n      gallery.innerHTML += addImages(images.hits);\n      lightbox.refresh();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      timeout: '2000',\n      message: error,\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n    });\n  } finally {\n    makeSmoothScrolling();\n    closeLoader();\n  }\n}\n\nfunction errorOfChecking(name) {\n  if (name === '') {\n    closeLoader();\n    hiddenLoadMore();\n    throw iziToast.error({\n      title: 'Error',\n      timeout: '1500',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n    });\n  }\n}\n\nfunction showLoader() {\n  loader.classList.remove('invisible');\n}\nfunction closeLoader() {\n  loader.classList.add('invisible');\n}\n\nfunction showLoadMore() {\n  loadMoreBtn.classList.remove('invisible');\n}\n\nfunction hiddenLoadMore() {\n  loadMoreBtn.classList.add('invisible');\n}\n\n\n\n\n"],"names":["addImages","photos","html","hit","getImages","name","MY_KEY","currentPage","numberOfResultsPerPage","searchParams","axios","response","lightbox","SimpleLightbox","makeSmoothScrolling","galleryItemHeight","formSearch","inputField","gallery","loader","loadMoreBtn","searchImages","closeLoader","event","showLoader","errorOfChecking","images","iziToast","showLoadMore","error","isLoadMore","totalHits","countPage","hiddenLoadMore"],"mappings":"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"}